---
- name: copy gpdfand daemon
  copy:
    src: files/thermal/gpdfand.pl
    dest: /usr/local/sbin/gpdfand
    owner: root
    group: root
    mode: 0777
  tags:
  - thermal

- name: create log path for gpdfand
  file:
    path: /var/log/gpdfand
    state: directory
    owner: root
    group: root
    mode: 0666
  tags:
  - thermal

- name: add suspend script for gpdfand
  copy:
    src: files/thermal/gpdfand
    dest: /lib/systemd/system-sleep/gpdfand
    owner: root
    group: root
    mode: 0777
  tags:
  - thermal

- name: copy systemd service for gpdfand
  copy:
    src: files/thermal/gpdfand.service
    dest: /etc/systemd/system/gpdfand.service
    owner: root
    group: root
    mode: 0644
  notify:
  - enable gpdfand
  tags:
  - thermal